diff -urNbB mysql-5.0.13-rc.org/sql/mysqld.cc mysql-5.0.13-rc/sql/mysqld.cc
--- mysql-5.0.13-rc.org/sql/mysqld.cc	2005-09-22 21:39:56.000000000 +0200
+++ mysql-5.0.13-rc/sql/mysqld.cc	2005-09-29 19:29:59.991454000 +0200
@@ -3183,7 +3183,7 @@
   init_ssl();
 
 #ifdef HAVE_LIBWRAP
-  libwrapName= my_progname+dirname_length(my_progname);
+  libwrapName= (char *)my_progname+dirname_length(my_progname);
   openlog(libwrapName, LOG_PID, LOG_AUTH);
 #endif
 
--- Percona-Server-5.6.13-rel61.0/storage/innobase/row/row0log.cc~	2013-10-07 12:25:25.000000000 +0200
+++ Percona-Server-5.6.13-rel61.0/storage/innobase/row/row0log.cc	2013-10-15 18:28:42.453836505 +0200
@@ -2364,7 +2364,7 @@
 		and be ignored when the operation is unsupported. */
 		fallocate(index->online_log->fd,
 			  FALLOC_FL_PUNCH_HOLE | FALLOC_FL_KEEP_SIZE,
-			  ofs, srv_buf_size);
+			  ofs, srv_sort_buf_size);
 #endif /* FALLOC_FL_PUNCH_HOLE */
 
 		next_mrec = index->online_log->head.block;
@@ -3153,7 +3153,7 @@
 		and be ignored when the operation is unsupported. */
 		fallocate(index->online_log->fd,
 			  FALLOC_FL_PUNCH_HOLE | FALLOC_FL_KEEP_SIZE,
-			  ofs, srv_buf_size);
+			  ofs, srv_sort_buf_size);
 #endif /* FALLOC_FL_PUNCH_HOLE */
 
 		next_mrec = index->online_log->head.block;
--- Percona-Server-5.6.13-rel61.0/sql/mysqld.cc~	2013-10-15 18:33:37.000000000 +0200
+++ Percona-Server-5.6.13-rel61.0/sql/mysqld.cc	2013-10-15 18:48:42.717336416 +0200
@@ -6389,7 +6389,7 @@
 
 #ifdef HAVE_LIBWRAP
     {
-      if (mysql_socket_getfd(sock) == mysql_socket_getfd(ip_sock))
+      if (mysql_socket_getfd(sock) == mysql_socket_getfd(base_ip_sock))
       {
         struct request_info req;
         signal(SIGCHLD, SIG_DFL);
