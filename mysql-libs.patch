--- mysql-6.0.4-alpha/configure.in~	2008-03-11 09:57:31.000000000 +0200
+++ mysql-6.0.4-alpha/configure.in	2008-03-11 10:03:02.561189423 +0200
@@ -787,9 +787,9 @@
 
 AC_CHECK_LIB(m, floor, [], AC_CHECK_LIB(m, __infinity))
 
-AC_CHECK_LIB(nsl_r, gethostbyname_r, [],
-  AC_CHECK_LIB(nsl, gethostbyname_r))
-AC_CHECK_FUNC(gethostbyname_r)
+AC_CHECK_FUNC(gethostbyname_r, [],
+  [AC_CHECK_LIB(nsl_r, gethostbyname_r, [],
+    [AC_CHECK_LIB(nsl, gethostbyname_r)])])
 
 AC_CHECK_FUNC(setsockopt, , AC_CHECK_LIB(socket, setsockopt))
 AC_CHECK_FUNC(yp_get_default_domain, ,
@@ -810,7 +810,11 @@
 # This may get things to compile even if bind-8 is installed
 AC_CHECK_FUNC(bind, , AC_CHECK_LIB(bind, bind))
 # Check if crypt() exists in libc or libcrypt, sets LIBS if needed
-AC_SEARCH_LIBS(crypt, crypt, AC_DEFINE(HAVE_CRYPT, 1, [crypt]))
+save_LIBS="$LIBS"
+AC_CHECK_LIB(crypt, crypt, [LIBS="-lcrypt $LIBS"; LIBCRYPT="-lcrypt"])
+AC_SUBST(LIBCRYPT)
+AC_CHECK_FUNC(crypt, AC_DEFINE([HAVE_CRYPT], [1], [crypt]))
+LIBS="$save_LIBS"
 
 # Check rt for aio_read
 AC_CHECK_LIB(rt, aio_read)
--- mysql-5.0.21/libmysql_r/Makefile.am~	2006-05-02 16:55:15.179229923 +0300
+++ mysql-5.0.21/libmysql_r/Makefile.am	2006-05-02 16:56:08.080408785 +0300
@@ -30,7 +30,7 @@
 include $(top_srcdir)/libmysql/Makefile.shared
 
 nodist_libmysqlclient_r_la_SOURCES = $(target_sources)
-libmysqlclient_r_la_LIBADD = $(target_libadd) $(yassl_las)
+libmysqlclient_r_la_LIBADD = $(target_libadd) $(yassl_las) -lpthread
 libmysqlclient_r_la_LDFLAGS = $(target_ldflags)
 
 link_sources:
--- mysql-6.0.4-alpha/sql/Makefile.am~	2008-03-11 09:57:31.000000000 +0200
+++ mysql-6.0.4-alpha/sql/Makefile.am	2008-03-11 10:04:03.296691076 +0200
@@ -52,7 +52,7 @@
 			@pstack_libs@ $(libevent_libs) \
 			@mysql_plugin_libs@ \
 			$(LDADD)  $(CXXLDFLAGS) $(WRAPLIBS) @LIBDL@ \
-			$(yassl_libs) $(openssl_libs) @MYSQLD_EXTRA_LIBS@ 
+			$(yassl_libs) $(openssl_libs) @LIBCRYPT@ @MYSQLD_EXTRA_LIBS@ 
 
 noinst_HEADERS =	item.h item_func.h item_sum.h item_cmpfunc.h \
 			item_strfunc.h item_timefunc.h \
