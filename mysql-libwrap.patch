diff -urN mysql-4.0.24.org/sql/mysqld.cc mysql-4.0.24/sql/mysqld.cc
--- mysql-4.0.24.org/sql/mysqld.cc	2005-03-05 01:38:14.000000000 +0100
+++ mysql-4.0.24/sql/mysqld.cc	2005-03-13 12:11:01.312220224 +0100
@@ -99,7 +99,16 @@
 #endif /* __WIN__ */
 
 #ifdef HAVE_LIBWRAP
+#define hosts_access hosts_access_old
+#define sock_host sock_host_old
+#define eval_client eval_client_old
 #include <tcpd.h>
+#undef hosts_access
+#undef sock_host
+#undef eval_client
+extern int hosts_access(struct request_info *);
+extern int sock_host(struct request_info *);
+extern int eval_client(struct request_info *);
 #include <syslog.h>
 #ifdef NEED_SYS_SYSLOG_H
 #include <sys/syslog.h>
